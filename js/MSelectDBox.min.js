!function(a){var b=function(a){this.init(a)};b.prototype={instances:[],get:function(b,c,d){var e=this;if("string"==typeof b){b=b.toLowerCase(),"undefined"==typeof d&&(d=1);var f=function(b){d&&e.trigger("get",new a.Event(b))};f("get:"+b);var g={},h={};if("string"==typeof g[b]&&(b=g[b]),"function"==typeof h[b]){if(b=h[b],"function"!=typeof this[b])return;return"undefined"==typeof c&&(c=Object.create(null)),this[b](c)}return"undefined"!=typeof this._props[b]?this._props[b]:void 0}},set:function(b,c,d,e){var f,g=this;if("undefined"==typeof b)return!1;if("object"==typeof b){var h=Object.create(null);for(var i in b)b.hasOwnProperty(i)&&(h[i]=this.set(i,b[i]));return h}if("string"!=typeof b)return!1;b=b.toLowerCase(),"undefined"==typeof e&&(e=1);var j=function(b){if(e){var d=new a.Event(b);d.value=c,g.trigger("set",d)}};j("set:"+b);var k={},l={};return"string"==typeof k[b]&&(b=k[b]),j("beforeSet:"+b),"string"==typeof l[b]?(b=l[b],"function"!=typeof this[b]?!1:("undefined"==typeof d&&(d=Object.create(null)),f=this[b](c,d),j("afterSet:"+b),f)):(this._props[b]=c,j("afterSet:"+b),!0)},getInstaces:function(){return this.getInstances.apply(this,arguments)},getInstances:function(b){if(!arguments.length)return this.instances;"object"!=typeof b&&(b=Object.create(null));for(var c=a.inArray(typeof b.name,["string","number"])>-1?b.name:null,d=[],e=0;e<this.instances.length;e++)(null===c||this.instances[e].get("name")==c)&&d.push(this.instances[e]);return d},removeInstances:function(b){if("object"==typeof b){for(var c="string"!=typeof b.name?null:b.name,d=[],e=0;e<this.instances.length;e++)this.instances[e].get("name")!=c?d.push(this.instances[e]):a(this.instances[e].get("dbox")).detach();this.instances=d}},_targetEvents:[{name:"click",event:"click"},{name:"keydown",event:"keydown"},{name:"keyup",event:"keyup"},{name:"hover",event:"hover"},{name:"focus",event:"focus"},{name:"focusout",event:"focusout"},{name:"change",event:"change"}],_eventCheckInputEmpty:function(b){var c=this.get("target");this.get("list");-1==a.inArray(c.tagName.toLowerCase(),["input","textarea"])&&-1==a.inArray(c.type.toLowerCase(),["text","password","email","url","search","tel"])||c.value.trim()||this.trigger("input:empty",b)},_eventDefaultInputEmpty:function(){this.deselectAll()},_eventDefaultSet:function(){this.trigger(arguments[1].type,arguments[1])},_eventDefaultGet:function(){this.trigger(arguments[1].type,arguments[1])},_eventSetList:function(){var a=arguments[1];this.set("list",a.value,null,!1),this.reInitList()},_eventDefaultKeyUp:function(b){var c=this,d=c.get("target"),e=b.keyCode,f=c.get("list"),g=c.get("dbox"),h=b.currentTarget;clearTimeout(c._timers.autoComplete),c._timers.autoComplete=setTimeout(function(){var b,i;if(c.get("autoComplete"))if(a.inArray(e,[37,38,39,40,9,13,18,17,16,20,27])>-1);else{var j=a(".MSelectDBox__list-item",g);for(b=d.value.toLowerCase(),b=c.fx.msplit([";",","],b),b=b[b.length-1],i=0;i<j.length;i++){var k=parseInt(j[i].getAttribute("data-msdbid")),l=a(j[i]);b?c._optionFiltersMatcher(c.get("optionFilters"),b,f[k].label)?l.removeClass("MSelectDBox__list-item_hidden"):l.addClass("MSelectDBox__list-item_hidden"):l.removeClass("MSelectDBox__list-item_hidden"),l.removeClass("MSelectDBox__list-item_hover")}}if(c.get("multiple")&&8==e){for(b=c.fx.trim(h.value," ;,","both"),b=c.fx.msplit([";",","],b),i=0;i<b.length;i++)b[i]=b[i].trim();for(var m in f)f.hasOwnProperty(m)&&(f[m].selected=a.inArray(f[m].label.trim(),b)>-1);c.applySelectedToList(),c.applySelectedToInput()}},500)},_eventDefaultKeyDownMultipleFalse:function(b){var c,d,e,f,g=this,h=g.get("dbox"),i=(g.get("list"),g.get("target"));if(!g.get("multiple"))if(a.inArray(b.keyCode,[37,39,9,18,17,16,20,27])>-1);else if(13==b.keyCode)g.isActive()?g.close():(g.open(),g._eventFocus.apply(i,[g,b]));else if(a.inArray(b.keyCode,[38,39,40])>-1){if(!g.isActive())return;c=a("ul",h).get(0),d=a("li:not(.MSelectDBox__list-item_hidden)",h);var j,k=-1;for(e=0,f=d.length;f>e;e++)if(j=a(d[e]),j.hasClass("MSelectDBox__list-item_selected")){k=e;break}var l;if(38==b.keyCode)l=0>k-1?0:k-1;else{if(40!=b.keyCode)return 39==b.keyCode,void 0;l=k+1>d.length-1?d.length-1:k+1}var m=parseInt(d[l].getAttribute("data-msdbid"));g._selectByID(m),g._calcScrollBarPosition(),g.trigger("select",b)}},_eventDefaultKeyDownMultipleTrue:function(b){var c,d,e,f=this,g=(f.get("target"),f.get("dbox"));f.get("list");if(f.get("multiple")){if(a.inArray(b.keyCode,[37,39,9,18,17,16,20,27])>-1);else if(13==b.keyCode){var h=a(".MSelectDBox__list-item_hover",g);if(!h.length)return;h=h.get(0);var i=f.getSelectedKeys();e=parseInt(h.getAttribute("data-msdbid"));var j=a.inArray(e,i);return j>-1?i[j]=null:i.push(e),f._selectByID(i),void f.trigger("select",b)}if(a.inArray(b.keyCode,[38,40])>-1){var k=a(".MSelectDBox__list-item:not(.MSelectDBox__list-item_hidden)",g);h=-1;var l;for(c=0,d=k.length;d>c;c++)l=a(k[c]),l.hasClass("MSelectDBox__list-item_hover")&&(h=c);var m;if(38==b.keyCode)m=0>h-1?0:h-1;else{if(40!=b.keyCode)return;m=h+1>k.length-1?k.length-1:h+1}a(k[m]).addClass("MSelectDBox__list-item_hover"),h>-1&&m!=h&&a(k[h]).removeClass("MSelectDBox__list-item_hover"),f._calcScrollBarPosition()}}},_eventFocus:function(b,c){var d,e,f,g=this,h=g.get("list"),i=g.get("dbox");g.open();var j=c.currentTarget||(this instanceof Element?this:null);if(-1!=a.inArray(j.tagName.toLowerCase(),["input","textarea"])||j.type&&-1!=a.inArray(j.type.toLowerCase(),["text","password","email","url","search","tel"]))if(d=j.getAttribute("data-msdb-value"),d&&(d=d.trim()),d){for(d=g.fx.msplit([",",";"],d),e=0;e<d.length;e++)for(d[e]=d[e].trim(),f=0;f<h.length;f++)if(h[f].value==d[e]){h[f].selected=!0;break}}else{var k=g.fx.msplit([",",";"],g.fx.trim(j.value,",; ","both"));for(e=0;e<k.length;e++)for(k[e]=k[e].trim(),f=0;f<h.length;f++)h[f].label==k[e]&&(h[f].selected=!0)}var l=a("li",i);if(l.length)for(l.removeClass("MSelectDBox__list-item_hidden"),f=0;f<l.length;f++)"undefined"!=typeof j.type&&a.inArray(j.type.toLowerCase(),["submit","button"])>-1||a.inArray(j.tagName.toLowerCase(),["submit","body","select"])>-1||a(l[f]).removeClass("MSelectDBox__list-item_hover");g.get("freeWrite")||g.applySelectedToInput(),g.applySelectedToInput(),g.applySelectedToList(),g._calcScrollBarPosition()},_initEvents:function(b){var c,d=(a("body").get(0),this);this.events=Object.create(null);var e={};for(c in b)b.hasOwnProperty(c)&&"function"==typeof b[c]&&(e[c.replace(/^on/,"")]=b[c]);for(c in b.events)b.events.hasOwnProperty(c)&&"function"==typeof b.events[c]&&(e[c]=b.events[c]);for(c in e)e.hasOwnProperty(c)&&this.on(c,e[c],!1);this.on("keyup",function(a,b){d._eventCheckInputEmpty(b)}),this.on("change",function(a,b){d._eventCheckInputEmpty(b)}),this.on("input:empty",d._eventDefaultInputEmpty),this.on("focus",d._eventFocus),this.on("click",d._eventFocus),this.on("focusout",function(a,b){return b.relatedTarget?void(d._isDBoxElement(b.relatedTarget)||d._isTargetElement(b.relatedTarget)||d.close()):void(d._timers.focusoutInputs=setTimeout(function(){d.close()},250))}),this.on("set",this._eventDefaultSet),this.on("get",this._eventDefaultGet),this.on("afterSet:list",this._eventSetList)},_deactivateInstances:function(a){for(var b=0;b<this.instances.length;b++)this.instances[b]._isDBoxElement(a.target)||this.instances[b]._isTargetElement(a.target)||this.instances[b].isActive()&&this.instances[b].close()},_initTarget:function(){var b,c=this.get("target");if(c&&"object"==typeof c)if("string"==typeof c)c=a(c),this.set("target",c.length?c.get(0):null);else if(c instanceof Element)this.set("target",c);else if("object"==typeof c&&"undefined"!=typeof c.push||Array.isArray(c))for(b=0;b<c.length;b++)if(c[b]instanceof Element){this.set("target",c[b]);break}},trigger:function(b,c){var d=this;if("string"==typeof b&&(b=b.toLowerCase(),"object"==typeof this.events[b]&&Array.isArray(this.events[b]))){c instanceof CustomEvent==0&&c instanceof Event==0&&c instanceof a.Event==0&&(c=new a.Event(b));for(var e=this.events[b],f=0;f<e.length;f++)"function"==typeof e[f]&&e[f].apply(this,[d,c])}},on:function(b,c){var d,e=this,f=this.get("target");if("string"!=typeof b||"function"!=typeof c)return!1;if(b=b.toLowerCase(),"object"!=typeof this.events[b]||!Array.isArray(this.events[b]))for(this.events[b]=[],d=0;d<this._targetEvents.length;d++)if(this._targetEvents[d].name.toLowerCase()==b){a(f).bind(this._targetEvents[d].event,function(a){e.trigger(b,a)},null);break}return this.events[b].push(c),!0},_globalStyles:{".MSelectDBox":{position:"absolute",display:"block",width:"168px",padding:"8px",height:"auto","box-shadow":"0 0px 8px rgba(0, 0, 0, 0.24)","background-color":"#FFF","border-radius":"3px"},".MSelectDBox_hidden":{display:"none"},".MSelectDBox:after":{content:"''",position:"absolute","border-left":"10px solid transparent","border-right":"9px solid transparent","border-bottom":"10px solid white",top:"-10px",left:"50%","margin-left":"margin-left"},".MSelectDBox_bottom:after":{content:"''",position:"absolute","border-left":"10px solid transparent","border-right":"9px solid transparent","border-bottom":"none","border-top":"10px solid white",top:"initial",bottom:"-10px",left:"50%","margin-left":"-10px"},".MSelectDBox__list-container":{position:"relative",margin:"0px",padding:"0px","max-height":"200px","overflow-x":"hidden"},".MSelectDBox__list-item":{position:"relative",padding:"5px","background-color":"none",color:"black",display:"block","line-height":"100%",cursor:"pointer","font-size":"12px"},".MSelectDBox__list-item:hover, .MSelectDBox__list-item_hover":{"background-color":"#e6e6e6"},".MSelectDBox__list-item_selected":{"background-color":"#C40056",color:"white"},".MSelectDBox__list-item_selected:hover, .MSelectDBox__list-item_selected.MSelectDBox__list-item_hover":{"background-color":"#DB2277"},".MSelectDBox__list-item_selected:before":{content:"':: '"},".MSelectDBox__list-item:active, .MSelectDBox__list-item_selected:active":{"background-color":"#b80000",color:"white"},".MSelectDBox__list-item_hidden":{display:"none"},".MSelectDBox__search-input":{border:"1px solid #a2a2a2",width:"100%"},".MSelectDBox__search-input-container":{"margin-bottom":"12px"}},_initStyles:function(){a("#mSelectDBoxStyle").length||this._buildStyles()},_buildStyles:function(){var b=a("body"),c="";for(var d in this._globalStyles)if(this._globalStyles.hasOwnProperty(d)){c+=d+"{";for(var e in this._globalStyles[d])this._globalStyles[d].hasOwnProperty(e)&&(c+=e+":"+this._globalStyles[d][e]+";");c+="} "}var f=a("#mSelectDBoxStyle");f.length||(f=a("<style />"),f.attr("id","mSelectDBoxStyle"),b.append(f)),f.html(c)},_initProps:function(b){var c,d,e,f=[{key:"name",type:"string"},{key:"list",type:"array"},{key:"autoApply",type:"any",into:"boolean"},{key:"autoPosition",type:"any",into:"boolean"},{key:"autoComplete",type:"any",into:"boolean"},{key:"target",type:"object"},{key:"multiple",type:"any",into:"boolean"},{key:"zIndex",type:"numeric",into:"integer"},{key:"width",type:"any"},{key:"builtInInput",type:"any",into:"boolean"},{key:"optionFilters",type:"array"},{key:"freeWrite",type:"any",into:"boolean"}];for(c=0;c<f.length;c++)f[c].key=f[c].key.toLowerCase();if("object"==typeof b)for(e in b)if(b.hasOwnProperty(e)){var g=e.toLowerCase(),h=null;for(d=0;d<f.length;d++)if(f[d].key.toLowerCase()==g){h=f[d];break}if(h){if("any"==h.type);else if("array"==h.type){if(!Array.isArray(b[e]))throw new Error("Argument data type mismatch (key: '"+e+"')")}else if("numeric"==h.type){if(isNaN(b[e]))throw new Error("Argument data type mismatch (key: '"+e+"')")}else if(h.type!=typeof b[e])throw new Error("Argument data type mismatch (key: '"+e+"')");h.hasOwnProperty("into")&&("boolean"==h.into?b[e]=Boolean(b[e]):"integer"==h.into?b[e]=parseInt(b[e]):"float"==h.into&&(b[e]=parseFloat(b[e]))),"width"==e&&(b[e]="undefined"==typeof b.width?"min":a.inArray(b.width,["min","auto"])>-1?b.width:parseInt(b.width)),this.set(g,b[e])}}},_initElements:function(){var b=a("body").get(0),c=document.createElement("div"),d=a(c);this.set("dbox",c),d.addClass("MSelectDBox"),d.addClass("MSelectDBox_hidden");var e=a('<div class="MSelectDBox__search-input-container"><input class="MSelectDBox__search-input" type="text"></div>').get(0);c.appendChild(e),this.get("builtInInput")||(e.style.display="none"),this.set("dbox",c),this.get("zIndex")&&(c.style.zIndex=this.get("zIndex"));var f=this.get("width");"auto"==f?c.style.width=this.get("target").clientWidth+"px":"min"==f||(c.style.width=f+"px"),b.appendChild(c)},_initList:function(){var b,c;if(!a.isArray(this.get("list")))return this.set("list",[],null,!1),!1;var d=this.get("list"),e=this.get("dbox"),f=[];for(b=0,c=d.length;c>b;b++)-1!=a.inArray(typeof d[b],["number","string"])?f.push({value:d[b].toString(),label:d[b].toString(),selected:!1}):"object"==typeof d[b]&&d[b].hasOwnProperty("value")&&d[b].hasOwnProperty("label")&&("undefined"==typeof d[b].selected?d[b].selected=!1:d[b].selected=Boolean(d[b].selected),f.push(d[b]));d=f,this.set("list",f,null,!1);var g=document.createElement("ul");g.className="MSelectDBox__list-container";var h=this;for(var i in d)if(d.hasOwnProperty(i)){var j=document.createElement("li");j.className="MSelectDBox__list-item",j.setAttribute("data-msdbid",i),a(j).bind("click",function(a){var b=[];clearTimeout(h._timers.focusoutInputs);var c=parseInt(this.getAttribute("data-msdbid"));h.get("multiple")?(d[c].selected=0==d[c].selected,b=h.getSelectedKeys()):b=[c],h._selectByID(b),h.trigger("select",a),h.calcPosition(),h.get("multiple")||h.close()},null),a(j).bind("mouseleave",function(){var b=a(this);b.hasClass("MSelectDBox__list-item_hover")&&b.removeClass("MSelectDBox__list-item_hover")},null),j.innerHTML=d[i].label,g.appendChild(j)}e.appendChild(g)},init:function(b){this._props=Object.create(null);var c=this,d=a("body").get(0);this.instances.push(this),this.events=Object.create(null),this._initProps(b),this._initTarget(),this._initEvents(b),this._initElements(),this._initList(),this._initStyles(),this._timers=Object.create(null),this._timers.autoComplete=null,this._timers.focusedInputs=null,this._timers.focusoutInputs=null;var e=this.get("target"),f=this.get("dbox");c.get("name")&&(e.setAttribute("data-msdb-name",c.get("name")),f.setAttribute("data-msdb-name",c.get("name"))),c.on("keydown",function(a,b){c.get("dbox"),c.get("list");c._eventDefaultKeyDownMultipleFalse(b),c._eventDefaultKeyDownMultipleTrue(b)}),(-1!=a.inArray(e.tagName.toLowerCase(),["input","textarea"])||e.type&&-1!=a.inArray(e.type.toLowerCase(),["text","password","email","url","search","tel"]))&&c.on("keyup",function(a,b){c._eventDefaultKeyUp(b)}),c.get("optionFilters")||c.set("optionFilters",[c.defaultOptionFilters["default"]]),c.instances.length<2&&a(d).bind("click",function(a){c._deactivateInstances(a)},null)},calcPosition:function(){var b=this,c=a("body").get(0),d=this.get("target"),e=this.get("dbox"),f=a(e),g=a(d).offset(),h=d.clientWidth,i=d.clientHeight,j=e.clientWidth;f.removeClass("MSelectDBox_bottom"),e.style.left=g.left+h/2-(j+2*b._globalStyles[".MSelectDBox"].padding.replace(/[px]/gi,""))/2+"px";var k=window.scrollY||c.scrollTop;e.clientHeight+g.top+i+12-k>window.innerHeight?(e.style.top=g.top-12-e.clientHeight+"px",f.addClass("MSelectDBox_bottom")):e.style.top=g.top+i+12+"px"},_calcScrollBarPosition:function(){var b,c=this.get("dbox"),d=a(".MSelectDBox__list-container",c).get(0);if(b=this.get("multiple")?a(".MSelectDBox__list-item_hover",c):a(".MSelectDBox__list-item_selected",c),b.length){var e=b.position().top+d.scrollTop;return e<d.clientHeight/2?void(d.scrollTop=0):void(d.scrollTop=e-d.clientHeight/2)}},_isDBoxElement:function(b){var c=this.get("dbox"),d=a(c).find("*");if(d){d=Array.prototype.slice.call(d,0),d.push(c);for(var e=0;e<d.length;e++)if(d[e]==b)return!0}return!1},_isTargetElement:function(b){var c=this.get("target"),d=a(c).find("*");if(d){d=Array.prototype.slice.call(d,0),d.push(c);for(var e=0;e<d.length;e++)if(d[e]==b)return!0}return!1},getSelectedKeys:function(){for(var a=[],b=this.get("list"),c=0;c<b.length;c++)"undefined"!=typeof b[c].selected&&b[c].selected&&a.push(c);return a},getSelectedValues:function(){for(var a=[],b=this.get("list"),c=0;c<b.length;c++)"undefined"!=typeof b[c].selected&&b[c].selected&&a.push(b[c].value);return a},getSelectedLabels:function(){for(var a=[],b=this.get("list"),c=0;c<b.length;c++)"undefined"!=typeof b[c].selected&&b[c].selected&&a.push(b[c].label);return a},hasValue:function(a){for(var b=this.get("list"),c=0;c<b.length;c++)if(b[c].value===a)return!0;return!1},hasLabel:function(a){for(var b=this.get("list"),c=0;c<b.length;c++)if(b[c].label===a)return!0;return!1},applySelectedToList:function(){var b=this.get("dbox"),c=this.get("list"),d=a("li",b);d.removeClass("MSelectDBox__list-item_selected");for(var e=0,f=d.length;f>e;e++){var g=d[e].getAttribute("data-msdbid");"undefined"!=typeof c[g]&&c[g].selected&&a(d[e]).addClass("MSelectDBox__list-item_selected")}},applySelectedToInput:function(){var b=this,c=b.getSelectedValues(),d=b.getSelectedLabels(),e=this.get("target"),f=e.tagName.toLowerCase();if("input"==f)e.type&&-1!=a.inArray(e.type.toLowerCase(),["text","password","email","url","search","tel"])&&(e.value=d.join("; ")+(d.length&&this.get("multiple")?";":""));else if("textarea"==f)e.value=d.join(";\n")+(d.length&&this.get("multiple")?";\n":"");else if("select"==f)for(var g=0;g<e.options.length;g++)e.options[g].selected=a.inArray(e.options[g].value,c)>-1;e.setAttribute("data-msdb-value",c.join(";")+(c.length&&this.get("multiple")?";":""))},select:function(b){if("object"==typeof b&&!a.isArray(b)){var c,d,e=!0;if("undefined"!=typeof b.blank&&(e=Boolean(b.blank)),b.id&&(!isNaN(b.id)||a.isArray(b.id)))return void this._selectByID(parseInt(b.id));if(b.value)c=b.value,d="value";else{if(!b.label)return;c=b.label,d="label"}if(a.inArray(typeof c,["number","string"])>-1)c=[c];else if("object"!=typeof c||!a.isArray(c))return null;if(!this.get("multiple")&&c.length>1)return null;for(var f=this.get("list"),g=0,h=f.length;h>g;g++)a.inArray(f[g][d],c)>-1?f[g].selected=!0:e&&(f[g].selected=!1);this.applySelectedToList(),this.applySelectedToInput()}},_selectByID:function(b){var c;if(isNaN(b)){if(!a.isArray(b))return}else b=[parseInt(b)];var d=this.get("list");for(c=0;c<d.length;c++)d[c].selected=!1;for(c=0;c<b.length;c++)isNaN(b[c])||d.hasOwnProperty(b[c])&&(d[b[c]].selected=!0);b.length&&(this.applySelectedToInput(),this.applySelectedToList())},_deselectByID:function(b){var c;if("undefined"==typeof bool&&(bool=!0),isNaN(b)){if(!a.isArray(b))return}else b=[parseInt(b)];var d=this.get("list");for(c=0;c<b.length;c++)isNaN(b[c])||d.hasOwnProperty(b[c])&&(d[b[c]].selected=!1);b.length&&(this.applySelectedToInput(),this.applySelectedToList())},_optionFiltersMatcher:function(b,c,d){if(arguments.length<3)return!0;if("function"==typeof b&&(b=[b]),!a.isArray(b))return!1;for(var e=0;e<b.length;e++)if(b[e].apply(this,[c,d]))return!0;return!1},defaultOptionFilters:{"default":function(a,b){if("string"!=typeof a||"string"!=typeof b)return!1;var c=new RegExp(a.toLowerCase().trim());return b=b.toString().toLowerCase(),Boolean(b.match(c))},russianKeyboard:function(a,b){if("string"!=typeof a||"string"!=typeof b)return!1;for(var c={"`":"ё","~":"ё",q:"й",w:"ц",e:"у",r:"к",t:"е",y:"н",u:"г",i:"ш",o:"щ",p:"з","[":"х","{":"х","]":"ъ","}":"ъ",a:"ф",s:"ы",d:"в",f:"а",g:"п",h:"р",j:"о",k:"л",l:"д",";":"ж",":":"э","'":"э",'"':"э",z:"я",x:"ч",c:"с",v:"м",b:"и",n:"т",m:"ь",",":"б","<":"б",".":"ю",">":"ю"},d=a.toLowerCase().split(""),e=0,f=d.length;f>e;e++)c.hasOwnProperty(d[e])&&(d[e]=c[d[e]]);return this.defaultOptionFilters["default"](d.join(""),b)}},_hideItems:function(){},_unhideItems:function(){},deselectAll:function(){for(var a=this.get("list"),b=0,c=a.length;c>b;b++)a[b].selected=!1;this.applySelectedToList(),this.applySelectedToInput()},selectAll:function(){var a=this.get("list");if(!this.get("multiple"))return null;for(var b=0,c=a.length;c>b;b++)a[b].selected=!0;this.applySelectedToList(),this.applySelectedToInput()},isActive:function(){var b=this.get("dbox");return 0==a(b).hasClass("MSelectDBox_hidden")},reInitList:function(){var b=this.get("dbox");a("ul",b).detach(),this._initList()},close:function(){var b=this.get("dbox");a(b).addClass("MSelectDBox_hidden")},open:function(){var b=this.get("dbox");a(b).removeClass("MSelectDBox_hidden"),this.calcPosition()},fx:{msplit:function(a,b){return b=b.replace(new RegExp("["+a.join("")+"]","g"),a[0]),b.split(a[0])},trim:function(b,c,d){if(b=b.split(""),"string"==typeof c)c=c.split("");else if("object"!=typeof c||"undefined"==typeof c.push)return b.join("");if("undefined"==typeof d&&(d="both"),"both"==d)for(;b.length&&(-1!=a.inArray(b[0],c)||-1!=a.inArray(b[b.length-1],c));)-1!=a.inArray(b[b.length-1],c)&&b.pop(),-1!=a.inArray(b[0],c)&&b.shift();if("left"==d)for(;b.length&&-1!=a.inArray(b[0],c);)b.shift();if("right"==d)for(;b.length&&-1!=a.inArray(b[b.length-1],c);)b.pop();return b.join("")},rest:function(a,b){return"object"!=typeof a?[]:"number"!=typeof b?[]:Array.prototype.slice.call(a,b)}}};var c=["open","close","isActive","get","set","select","selectAll","deselectAll","on","trigger"];a.fn.extend({mSelectDBox:function(d){if(this.length){for(var e=b.prototype.getInstances(),f=void 0,g=this[0],h=0;h<e.length;h++)if(e[h].get("target")==g){f=e[h];break}if(!arguments.length)return f;if("string"==typeof d){if(a.inArray(d,c)>-1){var i=b.prototype.fx.rest(arguments,1);if("function"==typeof f[d])return f[d].apply(f,i)}}else if("object"==typeof d)return d.target=this[0],new b(d)}}}),a.prototype.mSelectDBox.prototype=b.prototype}(jQuery);